import{a as z}from"./chunk-OGJOIL4K.js";import{a as j}from"./chunk-56V5ULCY.js";import{a as F}from"./chunk-RBWZAM2R.js";import{a as D}from"./chunk-RL5KOLBU.js";import{b as g}from"./chunk-PK5YRH4Z.js";import{a as R}from"./chunk-Q7Y4YLXA.js";import{d as k}from"./chunk-EGESI55J.js";import"./chunk-YOOGVOXO.js";import{$a as O,Da as E,M as d,Oa as l,Pa as f,R as p,Sa as v,Ta as h,Va as r,W as S,Wa as i,X as b,Xa as M,bb as P,ca as C,db as s,mb as w,nb as a,ob as y,pb as x,qa as o,ub as T,wb as I,xb as L}from"./chunk-LQHLUY7B.js";import{c as m}from"./chunk-2VMXMS7J.js";var u=class t{repo=p(g);execute(){return m(this,arguments,function*(n={}){return n.dateRange?this.repo.findByDateRange(n.dateRange):this.repo.findAll()})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=class t{repo=p(g);execute(n){return m(this,null,function*(){yield this.repo.delete(n)})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};var N=(t,n)=>n.id;function $(t,n){t&1&&M(0,"app-loading-spinner")}function G(t,n){t&1&&(r(0,"app-empty-state",3)(1,"a",5),a(2,"Enregistrer un sympt\xF4me"),i()())}function V(t,n){if(t&1&&(r(0,"span",11),a(1),i()),t&2){let e=s().$implicit;o(),x("Bristol ",e.bristolScale)}}function Q(t,n){if(t&1&&(r(0,"p",13),a(1),i()),t&2){let e=s().$implicit;o(),y(e.notes)}}function J(t,n){if(t&1){let e=O();r(0,"div",6)(1,"div",7)(2,"span",8),a(3),i(),r(4,"button",9),P("click",function(){let B=S(e).$implicit,H=s(2);return b(H.del(B))}),a(5,"\u2715"),i()(),r(6,"div",10)(7,"span"),a(8),i(),l(9,V,2,1,"span",11),r(10,"span",12),a(11),I(12,"relativeTime"),i()(),l(13,Q,2,1,"p",13),i()}if(t&2){let e=n.$implicit,c=s(2);o(3),y(c.LABELS[e.symptomType]),o(4),w(T("ibadge i--",e.intensity)),o(),x("Intensit\xE9 ",e.intensity,"/5"),o(),f(e.bristolScale?9:-1),o(2),y(L(12,8,e.timestamp)),o(2),f(e.notes?13:-1)}}function K(t,n){if(t&1&&(r(0,"div",4),v(1,J,14,10,"div",6,N),i()),t&2){let e=s();o(),h(e.entries())}}var A=class t{LABELS=z;getH=p(u);delH=p(_);toast=p(R);loading=C(!0);entries=C([]);ngOnInit(){return m(this,null,function*(){yield this.load()})}del(n){return m(this,null,function*(){if(confirm("Supprimer ce sympt\xF4me ?"))try{yield this.delH.execute(n.id),this.entries.update(e=>e.filter(c=>c.id!==n.id)),this.toast.success("Supprim\xE9")}catch{this.toast.error("Erreur")}})}load(){return m(this,null,function*(){this.loading.set(!0);try{this.entries.set(yield this.getH.execute())}catch{this.toast.error("Erreur de chargement")}finally{this.loading.set(!1)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-symptom-list"]],decls:9,vars:1,consts:[[1,"page"],[1,"ph"],["routerLink","new",1,"btn-add"],["icon","\u{1F4CA}","title","Aucun sympt\xF4me","description","Commencez \xE0 suivre vos sympt\xF4mes."],[1,"list"],["routerLink","new",1,"btn-primary"],[1,"card"],[1,"ch"],[1,"ct"],[1,"del",3,"click"],[1,"meta"],[1,"bb"],[1,"time"],[1,"notes"]],template:function(e,c){e&1&&(r(0,"div",0)(1,"header",1)(2,"h1"),a(3,"Sympt\xF4mes"),i(),r(4,"a",2),a(5,"+ Ajouter"),i()(),l(6,$,1,0,"app-loading-spinner")(7,G,3,0,"app-empty-state",3)(8,K,3,0,"div",4),i()),e&2&&(o(6),f(c.loading()?6:c.entries().length===0?7:8))},dependencies:[k,D,F,j],styles:[".page[_ngcontent-%COMP%]{padding:1rem;max-width:600px;margin:0 auto}.ph[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.ph[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0}.btn-add[_ngcontent-%COMP%]{background:#2e7d32;color:#fff;text-decoration:none;padding:.5rem 1rem;border-radius:20px;font-size:.85rem;font-weight:600}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;border:1px solid #eee}.ch[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.ct[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem}.del[_ngcontent-%COMP%]{background:none;border:none;color:#bdbdbd;cursor:pointer;font-size:1rem;padding:.25rem}.meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.4rem;align-items:center}.ibadge[_ngcontent-%COMP%]{font-size:.75rem;padding:.2rem .6rem;border-radius:12px;font-weight:500;background:#fff3e0;color:#e65100}.i--1[_ngcontent-%COMP%], .i--2[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.i--4[_ngcontent-%COMP%], .i--5[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.bb[_ngcontent-%COMP%]{font-size:.75rem;padding:.2rem .6rem;border-radius:12px;background:#e3f2fd;color:#0d47a1}.time[_ngcontent-%COMP%]{font-size:.75rem;color:#888;margin-left:auto}.notes[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:.5rem 0 0;font-style:italic}.btn-primary[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;border-radius:12px;background:#2e7d32;color:#fff;text-decoration:none;font-weight:600;margin-top:1rem}"]})};export{A as SymptomListComponent};
