import{a as F}from"./chunk-56V5ULCY.js";import{a as j}from"./chunk-RBWZAM2R.js";import{a as D}from"./chunk-RL5KOLBU.js";import{a as u}from"./chunk-PK5YRH4Z.js";import{a as L}from"./chunk-Q7Y4YLXA.js";import{d as S}from"./chunk-EGESI55J.js";import"./chunk-YOOGVOXO.js";import{$a as O,Da as v,M as g,Oa as p,Pa as f,R as d,Sa as y,Ta as M,Va as o,W as b,Wa as i,X as h,Xa as E,bb as P,ca as x,db as s,mb as k,nb as a,ob as m,pb as w,qa as r,ub as I,wb as T,xb as R}from"./chunk-LQHLUY7B.js";import{c}from"./chunk-2VMXMS7J.js";var _=class e{repo=d(u);execute(){return c(this,arguments,function*(n={}){return n.dateRange?this.repo.findByDateRange(n.dateRange):this.repo.findAll()})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})};var C=class e{repo=d(u);execute(n){return c(this,null,function*(){yield this.repo.delete(n)})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})};var N=(e,n)=>n.id,Y=(e,n)=>n.ingredient.name;function G(e,n){e&1&&E(0,"app-loading-spinner")}function V(e,n){e&1&&(o(0,"app-empty-state",3)(1,"a",5),a(2,"Enregistrer un repas"),i()())}function B(e,n){e&1&&(o(0,"span",10),a(1,"\u{1F916} IA"),i())}function Q(e,n){if(e&1&&(o(0,"span"),a(1),i()),e&2){let t=n.$implicit;k(I("chip fm--",t.ingredient.fodmapLevel)),r(),m(t.ingredient.name)}}function J(e,n){if(e&1&&(o(0,"span",14),a(1),i()),e&2){let t=s().$implicit;r(),w("+",t.ingredients.length-5)}}function K(e,n){if(e&1&&(o(0,"p",16),a(1),i()),e&2){let t=s().$implicit;r(),m(t.notes)}}function U(e,n){if(e&1){let t=O();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"span"),a(4),i(),o(5,"span",9),a(6),i(),p(7,B,2,0,"span",10),i(),o(8,"button",11),P("click",function(){let $=b(t).$implicit,H=s(2);return h(H.del($))}),a(9,"\u2715"),i()(),o(10,"div",12),y(11,Q,2,4,"span",13,Y),p(13,J,2,1,"span",14),i(),o(14,"div",15),a(15),T(16,"relativeTime"),i(),p(17,K,2,1,"p",16),i()}if(e&2){let t=n.$implicit,l=s(2);r(4),m(l.icons[t.mealType]),r(2),m(l.labels[t.mealType]),r(),f(t.aiAnalyzed?7:-1),r(4),M(t.ingredients.slice(0,5)),r(2),f(t.ingredients.length>5?13:-1),r(2),m(R(16,6,t.timestamp)),r(2),f(t.notes?17:-1)}}function W(e,n){if(e&1&&(o(0,"div",4),y(1,U,18,8,"div",6,N),i()),e&2){let t=s();r(),M(t.entries())}}var A=class e{icons={breakfast:"\u{1F305}",lunch:"\u2600\uFE0F",dinner:"\u{1F319}",snack:"\u{1F34E}"};labels={breakfast:"Petit-d\xE9jeuner",lunch:"D\xE9jeuner",dinner:"D\xEEner",snack:"Collation"};getH=d(_);delH=d(C);toast=d(L);loading=x(!0);entries=x([]);ngOnInit(){return c(this,null,function*(){yield this.load()})}del(n){return c(this,null,function*(){if(confirm("Supprimer ce repas ?"))try{yield this.delH.execute(n.id),this.entries.update(t=>t.filter(l=>l.id!==n.id)),this.toast.success("Supprim\xE9")}catch{this.toast.error("Erreur")}})}load(){return c(this,null,function*(){this.loading.set(!0);try{this.entries.set(yield this.getH.execute())}catch{this.toast.error("Erreur de chargement")}finally{this.loading.set(!1)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-meal-list"]],decls:9,vars:1,consts:[[1,"page"],[1,"ph"],["routerLink","new",1,"btn-add"],["icon","\u{1F37D}\uFE0F","title","Aucun repas enregistr\xE9","description","Enregistrez vos repas pour suivre votre alimentation."],[1,"list"],["routerLink","new",1,"btn-primary"],[1,"card"],[1,"ch"],[1,"info"],[1,"ct"],[1,"ai"],[1,"del",3,"click"],[1,"chips"],[3,"class"],[1,"more"],[1,"time"],[1,"notes"]],template:function(t,l){t&1&&(o(0,"div",0)(1,"header",1)(2,"h1"),a(3,"Journal alimentaire"),i(),o(4,"a",2),a(5,"+ Ajouter"),i()(),p(6,G,1,0,"app-loading-spinner")(7,V,3,0,"app-empty-state",3)(8,W,3,0,"div",4),i()),t&2&&(r(6),f(l.loading()?6:l.entries().length===0?7:8))},dependencies:[S,D,j,F],styles:[".page[_ngcontent-%COMP%]{padding:1rem;max-width:600px;margin:0 auto}.ph[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.ph[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0}.btn-add[_ngcontent-%COMP%]{background:#2e7d32;color:#fff;text-decoration:none;padding:.5rem 1rem;border-radius:20px;font-size:.85rem;font-weight:600}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;border:1px solid #eee}.ch[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.ct[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem}.ai[_ngcontent-%COMP%]{font-size:.7rem;padding:.15rem .4rem;background:#f3e5f5;border-radius:8px;color:#6a1b9a}.del[_ngcontent-%COMP%]{background:none;border:none;color:#bdbdbd;cursor:pointer;font-size:1rem}.chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.35rem;margin-bottom:.5rem}.chip[_ngcontent-%COMP%]{font-size:.75rem;padding:.2rem .6rem;border-radius:12px;background:#f5f5f5}.chip.fm--low[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.chip.fm--medium[_ngcontent-%COMP%]{background:#fff8e1;color:#f57f17}.chip.fm--high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.more[_ngcontent-%COMP%]{font-size:.75rem;padding:.2rem .6rem;border-radius:12px;background:#e3f2fd;color:#0d47a1}.time[_ngcontent-%COMP%]{font-size:.75rem;color:#888}.notes[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:.4rem 0 0;font-style:italic}.btn-primary[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;border-radius:12px;background:#2e7d32;color:#fff;text-decoration:none;font-weight:600;margin-top:1rem}"]})};export{A as MealListComponent};
