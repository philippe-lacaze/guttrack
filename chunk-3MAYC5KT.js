import{a as L}from"./chunk-56V5ULCY.js";import{a as k}from"./chunk-RBWZAM2R.js";import{a as T}from"./chunk-RL5KOLBU.js";import{c as f}from"./chunk-PK5YRH4Z.js";import{a as D}from"./chunk-Q7Y4YLXA.js";import{d as S}from"./chunk-EGESI55J.js";import"./chunk-YOOGVOXO.js";import{$a as O,Da as E,M as s,Oa as _,Pa as x,R as d,Sa as v,Ta as b,Va as o,W as C,Wa as i,X as M,Xa as h,bb as I,ca as y,db as p,nb as r,ob as l,qa as c,qb as P,wb as w,xb as R}from"./chunk-LQHLUY7B.js";import{c as a}from"./chunk-2VMXMS7J.js";var g=class e{repo=d(f);execute(){return a(this,arguments,function*(n={}){return n.dateRange?this.repo.findByDateRange(n.dateRange):this.repo.findAll()})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})};var u=class e{repo=d(f);execute(n){return a(this,null,function*(){yield this.repo.delete(n)})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})};var F=(e,n)=>n.id;function H(e,n){e&1&&h(0,"app-loading-spinner")}function Y(e,n){e&1&&(o(0,"app-empty-state",3)(1,"a",5),r(2,"Enregistrer un m\xE9dicament"),i()())}function $(e,n){if(e&1&&(o(0,"p",14),r(1),i()),e&2){let t=p().$implicit;c(),l(t.notes)}}function G(e,n){if(e&1){let t=O();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"span"),r(4,"\u{1F48A}"),i(),o(5,"span",9),r(6),i()(),o(7,"button",10),I("click",function(){let z=C(t).$implicit,A=p(2);return M(A.del(z))}),r(8,"\u2715"),i()(),o(9,"div",11)(10,"span",12),r(11),i(),o(12,"span",13),r(13),w(14,"relativeTime"),i()(),_(15,$,2,1,"p",14),i()}if(e&2){let t=n.$implicit;c(6),l(t.medicationName),c(5),P("",t.dose.amount," ",t.dose.unit),c(2),l(R(14,5,t.timestamp)),c(2),x(t.notes?15:-1)}}function V(e,n){if(e&1&&(o(0,"div",4),v(1,G,16,7,"div",6,F),i()),e&2){let t=p();c(),b(t.entries())}}var N=class e{getH=d(g);delH=d(u);toast=d(D);loading=y(!0);entries=y([]);ngOnInit(){return a(this,null,function*(){yield this.load()})}del(n){return a(this,null,function*(){if(confirm("Supprimer ce m\xE9dicament ?"))try{yield this.delH.execute(n.id),this.entries.update(t=>t.filter(m=>m.id!==n.id)),this.toast.success("Supprim\xE9")}catch{this.toast.error("Erreur")}})}load(){return a(this,null,function*(){this.loading.set(!0);try{this.entries.set(yield this.getH.execute())}catch{this.toast.error("Erreur de chargement")}finally{this.loading.set(!1)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=E({type:e,selectors:[["app-medication-list"]],decls:9,vars:1,consts:[[1,"page"],[1,"ph"],["routerLink","new",1,"btn-add"],["icon","\u{1F48A}","title","Aucun m\xE9dicament","description","Suivez vos prises de m\xE9dicaments."],[1,"list"],["routerLink","new",1,"btn-primary"],[1,"card"],[1,"ch"],[1,"info"],[1,"name"],[1,"del",3,"click"],[1,"meta"],[1,"dose"],[1,"time"],[1,"notes"]],template:function(t,m){t&1&&(o(0,"div",0)(1,"header",1)(2,"h1"),r(3,"M\xE9dicaments"),i(),o(4,"a",2),r(5,"+ Ajouter"),i()(),_(6,H,1,0,"app-loading-spinner")(7,Y,3,0,"app-empty-state",3)(8,V,3,0,"div",4),i()),t&2&&(c(6),x(m.loading()?6:m.entries().length===0?7:8))},dependencies:[S,T,k,L],styles:[".page[_ngcontent-%COMP%]{padding:1rem;max-width:600px;margin:0 auto}.ph[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.ph[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0}.btn-add[_ngcontent-%COMP%]{background:#2e7d32;color:#fff;text-decoration:none;padding:.5rem 1rem;border-radius:20px;font-size:.85rem;font-weight:600}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;border:1px solid #eee}.ch[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.name[_ngcontent-%COMP%]{font-weight:600}.del[_ngcontent-%COMP%]{background:none;border:none;color:#bdbdbd;cursor:pointer;font-size:1rem}.meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.dose[_ngcontent-%COMP%]{font-size:.8rem;padding:.2rem .6rem;border-radius:12px;background:#fce4ec;color:#c62828;font-weight:500}.time[_ngcontent-%COMP%]{font-size:.75rem;color:#888;margin-left:auto}.notes[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:.4rem 0 0;font-style:italic}.btn-primary[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;border-radius:12px;background:#2e7d32;color:#fff;text-decoration:none;font-weight:600;margin-top:1rem}"]})};export{N as MedicationListComponent};
